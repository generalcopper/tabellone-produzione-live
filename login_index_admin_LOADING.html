<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Accesso • Centro Produzioni</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
:root{
  --bg0:#05060a; --bg1:#0b1220;
  --panel:rgba(17,26,46,.88);
  --line:rgba(120,255,255,.22);
  --text:#eef4ff;
  --muted:rgba(238,244,255,.72);
  --cyan:#35f2ff;
  --mag:#ff2bd6;
  --danger:#ff5c7a;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif}
body{
  background:
    radial-gradient(1200px 700px at 18% 12%, rgba(53,242,255,.12), transparent 60%),
    radial-gradient(900px 650px at 85% 28%, rgba(255,43,214,.10), transparent 60%),
    linear-gradient(180deg,var(--bg0),var(--bg1));
  color:var(--text);
  display:flex;align-items:center;justify-content:center;
  padding:16px; overflow:hidden;
}
/* scanlines */
body:before{
  content:""; position:fixed; inset:0;
  background:repeating-linear-gradient(to bottom,
    rgba(255,255,255,.014), rgba(255,255,255,.014) 1px,
    transparent 1px, transparent 7px);
  pointer-events:none; opacity:.18;
}
/* subtle moving wave */
.wave{
  position:fixed; inset:-20%;
  background:linear-gradient(90deg,transparent,rgba(53,242,255,.12),rgba(255,43,214,.09),transparent);
  filter:blur(26px); opacity:.55;
  transform:translateX(-40%);
  animation:wave 7.5s ease-in-out infinite;
  pointer-events:none;
}
@keyframes wave{0%{transform:translateX(-40%)}50%{transform:translateX(40%)}100%{transform:translateX(-40%)}}

.wrap{width:min(560px,100%)}
.card{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:20px;
  padding:18px;
  box-shadow:0 18px 50px rgba(0,0,0,.50), 0 0 32px rgba(53,242,255,.08);
  position:relative;
  overflow:hidden;
  backdrop-filter:blur(10px);
}
/* animated edge sweep */
.card:before{
  content:""; position:absolute; inset:-2px;
  background:linear-gradient(90deg,transparent,rgba(53,242,255,.18),rgba(255,43,214,.12),transparent);
  filter:blur(12px); opacity:.55;
  transform:translateX(-60%);
  animation:sweep 6.5s linear infinite;
  pointer-events:none;
}
@keyframes sweep{0%{transform:translateX(-60%)}100%{transform:translateX(60%)}}

.head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
.brand{display:flex;align-items:center;gap:12px;min-width:0}
.logo{width:62px;height:62px;border-radius:16px;border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);display:flex;align-items:center;justify-content:center;overflow:hidden;flex:0 0 auto}
.logo img{width:100%;height:100%;object-fit:contain;padding:10px}
.titles h1{margin:0;font-size:18px;letter-spacing:.2px}
.titles .sub{margin-top:4px;color:var(--muted);font-size:12px;font-weight:650}
.pill{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);padding:7px 10px;border-radius:999px;
  font-size:12px;color:var(--muted);white-space:nowrap;font-weight:650}

.grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:10px}
@media(min-width:560px){.grid{grid-template-columns:1fr 1fr}}
label{font-size:12px;color:rgba(238,244,255,.75);font-weight:750;letter-spacing:.4px}
input{width:100%;margin-top:6px;padding:14px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.05);color:var(--text);font-size:16px;outline:none}
input:focus{border-color:rgba(53,242,255,.38);box-shadow:0 0 0 4px rgba(53,242,255,.10)}
.actions{display:flex;gap:10px;margin-top:10px}
button{width:100%;padding:14px 12px;border:none;border-radius:12px;
  background:linear-gradient(90deg, rgba(53,242,255,.95), rgba(255,43,214,.90));
  color:#071018;font-weight:850;font-size:14px;letter-spacing:.4px;cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.35), 0 0 24px rgba(53,242,255,.10);
  position:relative;overflow:hidden;
}
button:before{
  content:"";position:absolute;inset:0;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.20),transparent);
  transform:translateX(-60%);
  animation:shine 2.3s ease-in-out infinite;
  opacity:.45;
}
@keyframes shine{0%{transform:translateX(-60%)}60%{transform:translateX(60%)}100%{transform:translateX(60%)}}
.msg{margin-top:10px;font-size:13px;color:var(--muted);font-weight:650;min-height:18px}
.msg.err{color:var(--danger)}

/* loading overlay - cyber bar, faster */
.overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,.58);backdrop-filter:blur(8px);padding:16px;z-index:999}
.loader{width:min(520px,100%);background:rgba(17,26,46,.92);border:1px solid var(--line);border-radius:16px;padding:16px;
  box-shadow:0 18px 50px rgba(0,0,0,.55), 0 0 34px rgba(255,43,214,.08);position:relative;overflow:hidden}
.loader:before{
  content:"";position:absolute;inset:-2px;
  background:linear-gradient(90deg,transparent,rgba(53,242,255,.16),rgba(255,43,214,.12),transparent);
  filter:blur(10px);opacity:.45;transform:translateX(-60%);animation:sweep 5.8s linear infinite;pointer-events:none;
}
.loaderTop{display:flex;justify-content:space-between;gap:10px;align-items:baseline;color:rgba(238,244,255,.75);
  font-weight:750;font-size:12px;letter-spacing:.4px;text-transform:uppercase}
.barWrap{margin-top:10px;height:14px;border-radius:999px;border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);overflow:hidden}
.bar{height:100%;width:0%;
  background:linear-gradient(90deg, rgba(53,242,255,.98), rgba(255,43,214,.92));
  box-shadow:0 0 18px rgba(53,242,255,.14);
  position:relative;
}
.bar:after{
  content:"";position:absolute;top:0;bottom:0;width:64px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.22),transparent);
  transform:translateX(-80px);
  animation:barshine 1.1s linear infinite;
  opacity:.7;
}
@keyframes barshine{0%{transform:translateX(-80px)}100%{transform:translateX(520px)}}
</style>
</head>
<body>
<div class="wave"></div>

<div class="wrap">
  <div class="card">
    <div class="head">
      <div class="brand">
        <div class="logo" id="logoBox"><img id="logoImg" src="./logo.png" alt="Logo"></div>
        <div class="titles">
          <h1>Accesso</h1>
          <div class="sub">Centro Produzioni • General Copper</div>
        </div>
      </div>
      <div class="pill">build 20251217-021036</div>
    </div>

    <div class="grid">
      <div>
        <label for="u">Nome</label>
        <input id="u" autocomplete="username" placeholder="Nome">
      </div>
      <div>
        <label for="p">Password</label>
        <input id="p" type="password" autocomplete="current-password" placeholder="••••">
      </div>
    </div>

    <div class="actions"><button id="btn">Entra</button></div>
    <div class="msg" id="msg"></div>
  </div>
</div>

<div class="overlay" id="ov">
  <div class="loader">
    <div class="loaderTop"><div id="loadingText">Caricamento…</div><div id="pct">0%</div></div>
    <div class="barWrap"><div class="bar" id="bar"></div></div>
  </div>
</div>

<script>
  // logo fallback -> GC
  (function() {
    var img = document.getElementById("logoImg");
    var box = document.getElementById("logoBox");
    img.addEventListener("error", function() {
      img.style.display = "none";
      box.textContent = "GC";
      box.style.fontWeight = "900";
      box.style.letterSpacing = "1px";
      box.style.color = "rgba(238,244,255,.9)";
    });
  })();

  var USERS = {
    "admin1": { name: "Admin1", pass: "111" },
    "matteo": { name: "Matteo", pass: "396" },
    "hassan": { name: "Hassan", pass: "326" },
    "soufiane": { name: "Soufiane", pass: "358" },
    "ahmed": { name: "Ahmed", pass: "356" },
    "mustapha": { name: "Mustapha", pass: "336" },
    "giovanni": { name: "Giovanni", pass: "336" },
    "fabiano": { name: "Fabiano", pass: "346" },
    "abdelatif": { name: "Abdelatif", pass: "496" }
  };

  var KEY_AUTH = "admin_auth";
  var KEY_NAME = "operator_name";
  var AFTER_LOGIN_URL = "./index_centro_produzioni.html";

  if (sessionStorage.getItem(KEY_AUTH) === "ok") {
    window.location.replace(AFTER_LOGIN_URL);
  }

  var uEl = document.getElementById("u");
  var pEl = document.getElementById("p");
  var btn = document.getElementById("btn");
  var msg = document.getElementById("msg");
  var ov = document.getElementById("ov");
  var bar = document.getElementById("bar");
  var pct = document.getElementById("pct");
  var loadingText = document.getElementById("loadingText");

  function setMsg(text, isErr) {
    msg.textContent = text || "";
    if (isErr) msg.classList.add("err"); else msg.classList.remove("err");
  }

  function startLoading(name) {
    ov.style.display = "flex";
    loadingText.textContent = "Caricamento… (" + name + ")";
    bar.style.width = "0%";
    pct.textContent = "0%";

    var start = Date.now();
    var duration = 1450; // più veloce
    var timer = setInterval(function() {
      var k = Math.min(1, (Date.now() - start) / duration);
      var eased = 1 - Math.pow(1 - k, 2.6);
      var v = Math.floor(eased * 100);
      bar.style.width = v + "%";
      pct.textContent = v + "%";
      if (v >= 100) {
        clearInterval(timer);
        setTimeout(function() { window.location.replace(AFTER_LOGIN_URL); }, 80);
      }
    }, 45);
  }

  function doLogin() {
    var u = (uEl.value || "").trim().toLowerCase();
    var p = (pEl.value || "").trim();
    if (!u || !p) return setMsg("Inserisci nome e password.", true);
    var rec = USERS[u];
    if (!rec || rec.pass !== p) return setMsg("Credenziali non valide.", true);
    sessionStorage.setItem(KEY_AUTH, "ok");
    sessionStorage.setItem(KEY_NAME, rec.name);
    setMsg("Accesso consentito.", false);
    startLoading(rec.name);
  }

  btn.addEventListener("click", doLogin);
  pEl.addEventListener("keydown", function(e) { if (e.key === "Enter") doLogin(); });
</script>
</body>
</html>
