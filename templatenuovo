<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<title>Produzione Liquidi • General Copper</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
 --bg:#01030a;--cyan:#35f2ff;--green:#2bff88;--red:#ff4d4d;
 --text:#f1fbff;--muted:#8faec2;
}
*{box-sizing:border-box}
html,body{
 margin:0;height:100%;
 background:
  radial-gradient(1000px 400px at 50% -10%,#0b2742,transparent 60%),
  linear-gradient(180deg,#050b18,#01030a);
 color:var(--text);
 font-family:system-ui,Segoe UI,Arial;
 overflow:hidden;
}
#boot{
 position:fixed;inset:0;z-index:9999;
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;
 background:radial-gradient(circle,#0e2a44,#02040a);
}
#boot h1{
 font-size:80px;font-weight:900;letter-spacing:8px;
 color:var(--cyan);text-shadow:0 0 50px var(--cyan);
}
.barwrap{width:80%;height:28px;border:2px solid rgba(53,242,255,.6);margin-top:40px}
.bar{height:100%;width:0;background:linear-gradient(90deg,var(--cyan),#9ffcff)}
#pct{margin-top:18px;font-size:26px;color:var(--muted)}

#app{display:none;height:100%;padding:30px}

.top{
 display:grid;grid-template-columns:1fr auto;
 align-items:end;border-bottom:2px solid rgba(53,242,255,.35);
 padding-bottom:14px;
}
.title{font-size:60px;letter-spacing:6px;font-weight:900;color:var(--cyan)}
.times{font-size:22px;color:var(--muted);text-align:right}

.center{
 height:45%;display:flex;align-items:center;justify-content:center;
 flex-direction:column;text-align:center;
}
.label{font-size:36px;letter-spacing:4px;color:var(--muted)}
.now{
 margin-top:20px;font-size:150px;font-weight:950;
 letter-spacing:3px;text-transform:uppercase;
 text-shadow:0 0 40px rgba(53,242,255,.35);
}
.next{margin-top:30px;font-size:60px;color:var(--muted)}

.bottom{
 position:absolute;left:0;right:0;bottom:0;height:32%;
 border-top:2px solid rgba(53,242,255,.35);overflow:hidden;
}
.ticker{
 position:absolute;white-space:nowrap;
 display:flex;align-items:center;height:100%;
 animation:scroll 35s linear infinite;
}
.item{display:flex;align-items:center;margin-right:80px;font-size:42px;font-weight:900}
.dot{width:20px;height:20px;border-radius:50%;margin-right:16px}
.green{background:var(--green);box-shadow:0 0 14px var(--green)}
.red{background:var(--red);box-shadow:0 0 14px var(--red)}
.meta{margin-left:18px;font-size:28px;color:var(--muted)}

@keyframes scroll{
 from{transform:translateX(100%)}
 to{transform:translateX(-100%)}
}
</style>
</head>
<body>

<div id="boot">
 <h1>AVVIO SISTEMA</h1>
 <div class="barwrap"><div class="bar" id="bar"></div></div>
 <div id="pct">0%</div>
</div>

<div id="app">
 <div class="top">
  <div class="title">PRODUZIONE LIQUIDI</div>
  <div class="times">
    <div id="itTime">--:--</div>
    <div id="cnTime">CN --:--</div>
  </div>
 </div>

 <div class="center">
  <div class="label">ORA IN PRODUZIONE</div>
  <div class="now" id="nowProd">—</div>
  <div class="next" id="nextProd">PROSSIMO: —</div>
 </div>

 <div class="bottom">
  <div class="ticker" id="ticker"></div>
 </div>
</div>

<script>
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vRdbRcMc9ZdrJ0o7jCJZfyCeGuGD3pgxurwbxO6NO_2kizrkg0czCQYR3g0YmUyWffgyBkmBdNe9fiB/pub?output=csv";

let p=0;
const bar=document.getElementById("bar"),pct=document.getElementById("pct");
const boot=setInterval(()=>{
 p+=2;bar.style.width=p+"%";pct.textContent=p+"%";
 if(p>=100){clearInterval(boot);bootEl.style.display="none";app.style.display="block";init();}
},70);
const bootEl=document.getElementById("boot"),app=document.getElementById("app");

setInterval(()=>{
 const d=new Date();
 itTime.textContent=d.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"});
 cnTime.textContent=d.toLocaleTimeString("zh-CN",{timeZone:"Asia/Shanghai",hour:"2-digit",minute:"2-digit"});
},1000);

async function loadCSV(){
 const r=await fetch(CSV_URL+"&t="+Date.now());
 const t=await r.text();
 const rows=t.trim().split("\\n").slice(1).map(l=>l.split(","));
 return rows.map(r=>({name:r[0],qty:r[1],fmt:r[3],st:(r[4]||"").toLowerCase()}));
}

async function init(){
 const data=await loadCSV();if(!data.length)return;
 nowProd.textContent=data[0].name;
 nextProd.textContent="PROSSIMO: "+(data[1]?.name||"—");
 ticker.innerHTML="";
 data.forEach(d=>{
  ticker.innerHTML+=`<div class="item">
   <div class="dot ${d.st.includes("prod")?"green":"red"}"></div>
   ${d.name}<span class="meta">${d.qty} • ${d.fmt}</span>
  </div>`;
 });
}
</script>
</body>
</html>
